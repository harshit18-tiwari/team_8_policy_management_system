{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ACER\\\\OneDrive\\\\Desktop\\\\8team\\\\frontend\\\\src\\\\pages\\\\FileClaim.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { fetchWithAuth } from '../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction FileClaim({\n  user,\n  setView\n}) {\n  _s();\n  const [policies, setPolicies] = useState([]);\n  const [policyId, setPolicyId] = useState('');\n  const [description, setDescription] = useState('');\n  const [amount, setAmount] = useState('');\n  const [file, setFile] = useState(null);\n  useEffect(() => {\n    // Only fetch ACTIVE policies\n    fetchWithAuth('/policies/my-policies').then(res => res.json()).then(data => setPolicies(data.filter(p => p.status === 'ACTIVE')));\n  }, []);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!policyId || !file) {\n      alert(\"Please select a policy and upload evidence.\");\n      return;\n    }\n    const formData = new FormData();\n    formData.append('policyId', policyId);\n    formData.append('description', description);\n    formData.append('amount', amount);\n    formData.append('evidence', file);\n    const res = await fetchWithAuth('/claims/file', {\n      method: 'POST',\n      body: formData // fetchWithAuth handles content-type for FormData\n    });\n    if (res.ok) {\n      alert(\"Claim Filed Successfully\");\n      setView('dashboard');\n    } else {\n      alert(\"Error filing claim\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"File a New Claim\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Select Policy:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        onChange: e => setPolicyId(e.target.value),\n        value: policyId,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"-- Select --\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 21\n        }, this), policies.map(p => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: p.id,\n          children: [p.product_name, \" (\", p.policy_number, \")\"]\n        }, p.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Description of Incident:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        onChange: e => setDescription(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Claim Amount ($):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        onChange: e => setAmount(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Upload Evidence (Image/PDF):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: e => setFile(e.target.files[0]),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Submit Claim\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"secondary\",\n        onClick: () => setView('dashboard'),\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 9\n  }, this);\n}\n_s(FileClaim, \"8a6A3BXFQnt4q+U3uL+6VHBMxrQ=\");\n_c = FileClaim;\nexport default FileClaim;\nvar _c;\n$RefreshReg$(_c, \"FileClaim\");","map":{"version":3,"names":["React","useState","useEffect","fetchWithAuth","jsxDEV","_jsxDEV","FileClaim","user","setView","_s","policies","setPolicies","policyId","setPolicyId","description","setDescription","amount","setAmount","file","setFile","then","res","json","data","filter","p","status","handleSubmit","e","preventDefault","alert","formData","FormData","append","method","body","ok","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","onChange","target","value","map","id","product_name","policy_number","required","type","files","onClick","_c","$RefreshReg$"],"sources":["C:/Users/ACER/OneDrive/Desktop/8team/frontend/src/pages/FileClaim.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { fetchWithAuth } from '../api';\r\n\r\nfunction FileClaim({ user, setView }) {\r\n    const [policies, setPolicies] = useState([]);\r\n    const [policyId, setPolicyId] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const [amount, setAmount] = useState('');\r\n    const [file, setFile] = useState(null);\r\n\r\n    useEffect(() => {\r\n        // Only fetch ACTIVE policies\r\n        fetchWithAuth('/policies/my-policies')\r\n            .then(res => res.json())\r\n            .then(data => setPolicies(data.filter(p => p.status === 'ACTIVE')));\r\n    }, []);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!policyId || !file) {\r\n            alert(\"Please select a policy and upload evidence.\");\r\n            return;\r\n        }\r\n\r\n        const formData = new FormData();\r\n        formData.append('policyId', policyId);\r\n        formData.append('description', description);\r\n        formData.append('amount', amount);\r\n        formData.append('evidence', file);\r\n\r\n        const res = await fetchWithAuth('/claims/file', {\r\n            method: 'POST',\r\n            body: formData // fetchWithAuth handles content-type for FormData\r\n        });\r\n\r\n        if (res.ok) {\r\n            alert(\"Claim Filed Successfully\");\r\n            setView('dashboard');\r\n        } else {\r\n            alert(\"Error filing claim\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"card\">\r\n            <h2>File a New Claim</h2>\r\n            <form onSubmit={handleSubmit}>\r\n                <label>Select Policy:</label>\r\n                <select onChange={e => setPolicyId(e.target.value)} value={policyId}>\r\n                    <option value=\"\">-- Select --</option>\r\n                    {policies.map(p => (\r\n                        <option key={p.id} value={p.id}>{p.product_name} ({p.policy_number})</option>\r\n                    ))}\r\n                </select>\r\n\r\n                <label>Description of Incident:</label>\r\n                <textarea onChange={e => setDescription(e.target.value)} required />\r\n\r\n                <label>Claim Amount ($):</label>\r\n                <input type=\"number\" onChange={e => setAmount(e.target.value)} required />\r\n\r\n                <label>Upload Evidence (Image/PDF):</label>\r\n                <input type=\"file\" onChange={e => setFile(e.target.files[0])} required />\r\n\r\n                <button type=\"submit\">Submit Claim</button>\r\n                <button type=\"button\" className=\"secondary\" onClick={() => setView('dashboard')}>Cancel</button>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FileClaim;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,aAAa,QAAQ,QAAQ;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvC,SAASC,SAASA,CAAC;EAAEC,IAAI;EAAEC;AAAQ,CAAC,EAAE;EAAAC,EAAA;EAClC,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACW,QAAQ,EAAEC,WAAW,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACa,WAAW,EAAEC,cAAc,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACe,MAAM,EAAEC,SAAS,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACiB,IAAI,EAAEC,OAAO,CAAC,GAAGlB,QAAQ,CAAC,IAAI,CAAC;EAEtCC,SAAS,CAAC,MAAM;IACZ;IACAC,aAAa,CAAC,uBAAuB,CAAC,CACjCiB,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACG,IAAI,IAAIZ,WAAW,CAACY,IAAI,CAACC,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,MAAM,KAAK,QAAQ,CAAC,CAAC,CAAC;EAC3E,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,YAAY,GAAG,MAAOC,CAAC,IAAK;IAC9BA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,IAAI,CAACjB,QAAQ,IAAI,CAACM,IAAI,EAAE;MACpBY,KAAK,CAAC,6CAA6C,CAAC;MACpD;IACJ;IAEA,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAErB,QAAQ,CAAC;IACrCmB,QAAQ,CAACE,MAAM,CAAC,aAAa,EAAEnB,WAAW,CAAC;IAC3CiB,QAAQ,CAACE,MAAM,CAAC,QAAQ,EAAEjB,MAAM,CAAC;IACjCe,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAEf,IAAI,CAAC;IAEjC,MAAMG,GAAG,GAAG,MAAMlB,aAAa,CAAC,cAAc,EAAE;MAC5C+B,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEJ,QAAQ,CAAC;IACnB,CAAC,CAAC;IAEF,IAAIV,GAAG,CAACe,EAAE,EAAE;MACRN,KAAK,CAAC,0BAA0B,CAAC;MACjCtB,OAAO,CAAC,WAAW,CAAC;IACxB,CAAC,MAAM;MACHsB,KAAK,CAAC,oBAAoB,CAAC;IAC/B;EACJ,CAAC;EAED,oBACIzB,OAAA;IAAKgC,SAAS,EAAC,MAAM;IAAAC,QAAA,gBACjBjC,OAAA;MAAAiC,QAAA,EAAI;IAAgB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACzBrC,OAAA;MAAMsC,QAAQ,EAAEhB,YAAa;MAAAW,QAAA,gBACzBjC,OAAA;QAAAiC,QAAA,EAAO;MAAc;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC7BrC,OAAA;QAAQuC,QAAQ,EAAEhB,CAAC,IAAIf,WAAW,CAACe,CAAC,CAACiB,MAAM,CAACC,KAAK,CAAE;QAACA,KAAK,EAAElC,QAAS;QAAA0B,QAAA,gBAChEjC,OAAA;UAAQyC,KAAK,EAAC,EAAE;UAAAR,QAAA,EAAC;QAAY;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,EACrChC,QAAQ,CAACqC,GAAG,CAACtB,CAAC,iBACXpB,OAAA;UAAmByC,KAAK,EAAErB,CAAC,CAACuB,EAAG;UAAAV,QAAA,GAAEb,CAAC,CAACwB,YAAY,EAAC,IAAE,EAACxB,CAAC,CAACyB,aAAa,EAAC,GAAC;QAAA,GAAvDzB,CAAC,CAACuB,EAAE;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAA2D,CAC/E,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,eAETrC,OAAA;QAAAiC,QAAA,EAAO;MAAwB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACvCrC,OAAA;QAAUuC,QAAQ,EAAEhB,CAAC,IAAIb,cAAc,CAACa,CAAC,CAACiB,MAAM,CAACC,KAAK,CAAE;QAACK,QAAQ;MAAA;QAAAZ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAEpErC,OAAA;QAAAiC,QAAA,EAAO;MAAiB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAChCrC,OAAA;QAAO+C,IAAI,EAAC,QAAQ;QAACR,QAAQ,EAAEhB,CAAC,IAAIX,SAAS,CAACW,CAAC,CAACiB,MAAM,CAACC,KAAK,CAAE;QAACK,QAAQ;MAAA;QAAAZ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAE1ErC,OAAA;QAAAiC,QAAA,EAAO;MAA4B;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC3CrC,OAAA;QAAO+C,IAAI,EAAC,MAAM;QAACR,QAAQ,EAAEhB,CAAC,IAAIT,OAAO,CAACS,CAAC,CAACiB,MAAM,CAACQ,KAAK,CAAC,CAAC,CAAC,CAAE;QAACF,QAAQ;MAAA;QAAAZ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAEzErC,OAAA;QAAQ+C,IAAI,EAAC,QAAQ;QAAAd,QAAA,EAAC;MAAY;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAC3CrC,OAAA;QAAQ+C,IAAI,EAAC,QAAQ;QAACf,SAAS,EAAC,WAAW;QAACiB,OAAO,EAAEA,CAAA,KAAM9C,OAAO,CAAC,WAAW,CAAE;QAAA8B,QAAA,EAAC;MAAM;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC9F,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEd;AAACjC,EAAA,CAlEQH,SAAS;AAAAiD,EAAA,GAATjD,SAAS;AAoElB,eAAeA,SAAS;AAAC,IAAAiD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}